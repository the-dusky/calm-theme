{{ 'how-it-works.css' | asset_url | stylesheet_tag }}

<div class="how-it-works-section">
  <div class="container">
    <div class="how-it-works-header">
      <h1>{{ section.settings.heading | default: 'Your Order Journey' }}</h1>
      <p class="subtitle">{{ section.settings.subtitle | default: "Here's what to expect with your international shipment" }}</p>
      <p class="transparency-note">{{ section.settings.transparency_note | default: 'We believe in radical transparency âœ¨' }}</p>
    </div>

    <div class="shipping-steps-container">
      <div class="shipping-steps-header">
        <h2>{{ section.settings.steps_heading | default: 'Shipping Timeline' }}</h2>
        <p class="steps-subtitle">{{ section.settings.steps_subtitle | default: 'Track your order journey' }}</p>
        <p class="steps-hint">ðŸ’¡ Tap steps below for radical transparency</p>
      </div>

      <div class="steps-timeline">
        {% for block in section.blocks %}
          {% case block.type %}
            {% when 'shipping_step' %}
              <div class="step-item" data-step-id="{{ forloop.index }}">
                <div class="step-connector {% unless forloop.last %}has-line{% endunless %}"></div>
                
                <div class="step-content">
                  <div class="step-circle {% if block.settings.is_active %}active{% endif %}">
                    {% if block.settings.icon %}
                      {{ block.settings.icon }}
                    {% else %}
                      <span class="step-number">{{ forloop.index }}</span>
                    {% endif %}
                  </div>
                  
                  <div class="step-details">
                    <div class="step-badge {% if block.settings.is_active %}active{% endif %}">
                      Step {{ forloop.index }}
                    </div>
                    <h3 class="step-title {% if block.settings.is_active %}active{% endif %}">
                      {{ block.settings.title }}
                    </h3>
                    <p class="step-description">{{ block.settings.description }}</p>

                    {% if block.settings.transparency_title != blank %}
                      <div class="transparency-section">
                        <button class="transparency-toggle" data-toggle="step-{{ forloop.index }}">
                          <svg class="chevron-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="6 9 12 15 18 9"></polyline>
                          </svg>
                          <span>Behind the scenes</span>
                        </button>
                        
                        <div class="transparency-content" id="step-{{ forloop.index }}" style="display: none;">
                          <div class="transparency-header">
                            {% if block.settings.transparency_icon %}
                              {{ block.settings.transparency_icon }}
                            {% endif %}
                            <span>{{ block.settings.transparency_title }}</span>
                          </div>
                          <p>{{ block.settings.transparency_content }}</p>
                        </div>
                      </div>
                    {% endif %}
                  </div>
                </div>
              </div>
          {% endcase %}
        {% endfor %}
      </div>

      <div class="shipping-note">
        <p><strong>Note:</strong> {{ section.settings.shipping_note | default: 'Actual delivery times may vary based on customs processing and local shipping conditions.' }}</p>
      </div>

      <div class="transparency-commitment">
        <p><strong>Our commitment:</strong> {{ section.settings.commitment_text | default: 'We believe in radical transparency. Every constraint, every decision, every "why" - we share it all because we think you deserve to know how your order really works.' }}</p>
      </div>
    </div>

    {% if section.settings.show_community_section %}
      <div class="community-section">
        <div class="community-header">
          <svg class="community-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z"></path>
          </svg>
          <h3>{{ section.settings.community_title | default: 'Join Our Community' }}</h3>
        </div>
        <p class="community-description">{{ section.settings.community_description | default: 'Help us shape the future of international commerce. We\'re building this together.' }}</p>
        <a href="{{ section.settings.community_link }}" class="community-button">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z"></path>
          </svg>
          {{ section.settings.community_button_text | default: 'Join Discord' }}
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m18 13 6-6-6-6"></path>
            <path d="M7 7h11"></path>
          </svg>
        </a>
      </div>
    {% endif %}

    {% if section.settings.show_support_section %}
      <div class="support-section">
        <p class="support-question">{{ section.settings.support_question | default: 'Questions about your shipment?' }}</p>
        <a href="{{ section.settings.support_link }}" class="support-button">
          {{ section.settings.support_button_text | default: 'Contact Support' }}
        </a>
      </div>
    {% endif %}

    {% if section.settings.show_transparency_statement %}
      <div class="transparency-statement">
        <p>{{ section.settings.transparency_statement | default: 'Every business decision explained. Every constraint shared.<br>Because transparency builds trust, and trust builds community.' }}</p>
      </div>
    {% endif %}
  </div>
</div>


{% schema %}
{
  "name": "How It Works",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Main Heading",
      "default": "Your Order Journey"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "Here's what to expect with your international shipment"
    },
    {
      "type": "text",
      "id": "transparency_note",
      "label": "Transparency Note",
      "default": "We believe in radical transparency âœ¨"
    },
    {
      "type": "text",
      "id": "steps_heading",
      "label": "Steps Section Heading",
      "default": "Shipping Timeline"
    },
    {
      "type": "text",
      "id": "steps_subtitle",
      "label": "Steps Subtitle",
      "default": "Track your order journey"
    },
    {
      "type": "textarea",
      "id": "shipping_note",
      "label": "Shipping Note",
      "default": "Actual delivery times may vary based on customs processing and local shipping conditions."
    },
    {
      "type": "textarea",
      "id": "commitment_text",
      "label": "Transparency Commitment",
      "default": "We believe in radical transparency. Every constraint, every decision, every \"why\" - we share it all because we think you deserve to know how your order really works."
    },
    {
      "type": "checkbox",
      "id": "show_community_section",
      "label": "Show Community Section",
      "default": true
    },
    {
      "type": "text",
      "id": "community_title",
      "label": "Community Section Title",
      "default": "Join Our Community"
    },
    {
      "type": "textarea",
      "id": "community_description",
      "label": "Community Description",
      "default": "Help us shape the future of international commerce. We're building this together."
    },
    {
      "type": "url",
      "id": "community_link",
      "label": "Community Link"
    },
    {
      "type": "text",
      "id": "community_button_text",
      "label": "Community Button Text",
      "default": "Join Discord"
    },
    {
      "type": "checkbox",
      "id": "show_support_section",
      "label": "Show Support Section",
      "default": true
    },
    {
      "type": "text",
      "id": "support_question",
      "label": "Support Question",
      "default": "Questions about your shipment?"
    },
    {
      "type": "url",
      "id": "support_link",
      "label": "Support Link"
    },
    {
      "type": "text",
      "id": "support_button_text",
      "label": "Support Button Text",
      "default": "Contact Support"
    },
    {
      "type": "checkbox",
      "id": "show_transparency_statement",
      "label": "Show Transparency Statement",
      "default": true
    },
    {
      "type": "richtext",
      "id": "transparency_statement",
      "label": "Transparency Statement",
      "default": "<p>Every business decision explained. Every constraint shared.<br>Because transparency builds trust, and trust builds community.</p>"
    }
  ],
  "blocks": [
    {
      "type": "shipping_step",
      "name": "Shipping Step",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Step Title"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Step Description"
        },
        {
          "type": "checkbox",
          "id": "is_active",
          "label": "Is Active Step",
          "default": false
        },
        {
          "type": "html",
          "id": "icon",
          "label": "Custom Icon (SVG)"
        },
        {
          "type": "text",
          "id": "transparency_title",
          "label": "Transparency Section Title"
        },
        {
          "type": "textarea",
          "id": "transparency_content",
          "label": "Transparency Content"
        },
        {
          "type": "html",
          "id": "transparency_icon",
          "label": "Transparency Icon (SVG)"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "How It Works",
      "category": "t:categories.storytelling",
      "blocks": [
        {
          "type": "shipping_step",
          "settings": {
            "title": "Place Order by Cutoff",
            "description": "Submit your order before daily cutoff time",
            "is_active": true,
            "transparency_title": "Why we're starting slow",
            "transparency_content": "We are starting slow and trying to learn as much as possible from our customers. Join our Discord community to help shape the vision. We'd rather get it right than get it fast."
          }
        },
        {
          "type": "shipping_step",
          "settings": {
            "title": "Shipping from Thailand",
            "description": "7-10 business days processing & transit",
            "transparency_title": "Our Thai connection",
            "transparency_content": "Calm is a brand based in Thailand. We are friends with them and decided they need to be in the US and Japan. Why the US and Japan? One of us lives in the US and the other in Japan. Sometimes business is that simple."
          }
        },
        {
          "type": "shipping_step",
          "settings": {
            "title": "Receipt in Jersey City",
            "description": "Package arrives at our US facility",
            "transparency_title": "About returns (for now)",
            "transparency_content": "Currently we are unable to accept returns. We suggest buying one item to see how it fits and then expand. This will change in the future as we build out our logistics. We know it's not ideal, but we're being honest about our current constraints."
          }
        },
        {
          "type": "shipping_step",
          "settings": {
            "title": "Ship by Date",
            "description": "Final delivery to your address"
          }
        }
      ]
    }
  ]
}
{% endschema %}